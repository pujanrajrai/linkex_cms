{% extends "base.html" %}
{% block title %} {{ title }} {% endblock title %}

{% block pagetitle %} {{ title }} {% endblock %}
{% block content %}
    <form method="post" enctype="multipart/form-data" id="agencyForm">
        <div class="bg-white p-8 rounded-lg shadow-lg mx-auto">
            <!-- Agency Creation Form -->
            {% csrf_token %}
            {% comment %} <div class="grid grid-cols-4 gap-6 mb-6">
                {% for field in form %}
                    <div class="flex flex-col space-y-2">
                        <label class="text-sm font-medium text-gray-700">{{ field.label_tag }}</label>
                        {{ field }}
                        {{ field.errors }}
                        {% if field.help_text %}<p class="text-xs text-gray-500">{{ field.help_text|safe }}</p>{% endif %}
                    </div>
                {% endfor %}
            </div> {% endcomment %}

            <div class="grid grid-cols-4 gap-6 mb-6 md:grid-cols-2 lg:grid-cols-4 sm:grid-cols-1">
                {% for field in form %}
                    <div class="flex flex-col space-y-2">
                        <label class="text-sm font-medium text-gray-700">
                            {{ field.label_tag }}
                        </label>
                        
                        {{ field }}
                        {{ field.errors }}
    
                        {% if field.help_text %}
                            <p class="text-xs text-gray-500">{{ field.help_text|safe }}</p>
                        {% endif %}
    
                        {# Handle file previews #}
                        {% if field.field.widget.input_type == "file" %}
                            {% if field.value and field.value.url %}
                                <div class="mt-2 space-y-2">
                                    <p class="text-sm text-gray-600">Current {{ field.label }}:</p>

                                    <img src="{{ field.value.url }}" alt="{{ field.name }}"
                                        class="h-20 rounded border"
                                        onerror="this.style.display='none'" />

                                    <a href="{{ field.value.url }}" target="_blank" class="text-blue-600 underline text-sm">
                                        View file
                                    </a>
                                </div>
                            {% endif %}
                        {% endif %}


                    </div>
                {% endfor %}
            </div>
            
        </div>
        <div class="bg-white p-8 mt-3 rounded-lg shadow-lg mx-auto">
            <!-- Submit Button -->
            <button type="submit" class="bg-primary text-white p-3 w-full mt-5 text-xl">Save</button>
            <!-- Back Button -->
            <div class="mt-6 text-center">
                <a href="{% url 'accounts:pages:agency:list' %}"
                   class="text-gray-600 hover:underline font-semibold text-lg">‚Üê Back</a>
            </div>
        </div>
    </form>
    <script>
        function togglePasswordVisibility() {
            var passwordField = document.getElementById("id_password");
            var eyeIcon = document.querySelector(".eye-icon i");
            if (passwordField.type === "password") {
            passwordField.type = "text";
            eyeIcon.classList.remove("fa-eye");
            eyeIcon.classList.add("fa-eye-slash");
            } else {
            passwordField.type = "password";
            eyeIcon.classList.remove("fa-eye-slash");
            eyeIcon.classList.add("fa-eye");
            }
        }
    </script>
{% endblock %}
