{% extends "base.html" %}
{% block title %} {{ title }} {% endblock title %}

{% block content %}
    <div class="container mx-auto p-4">
        <!-- Run Details Section -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-xl font-semibold mb-4">Run Details</h2>
            {% for format in run.manifest.all %}<p>{{ format.name }}</p>{% endfor %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <p class="text-gray-600">Run Number</p>
                    <p class="font-medium">{{ run.run_no }}</p>
                </div>
                <div>
                    <p class="text-gray-600">Flight Number</p>
                    <p class="font-medium">{{ run.flight_no }}</p>
                </div>
                <div>
                    <p class="text-gray-600">Flight Departure Date</p>
                    <p class="font-medium">{{ run.flight_departure_date }}</p>
                </div>
                <div>
                    <p class="text-gray-600">MAWB Number</p>
                    <p class="font-medium">{{ run.mawb_no }}</p>
                </div>
                <div>
                    <p class="text-gray-600">Company</p>
                    <p class="font-medium">{{ run.company }}</p>
                </div>
                <div>
                    <p class="text-gray-600">Hub</p>
                    <p class="font-medium">{{ run.hub }}</p>
                </div>
                <div>
                    <p class="text-gray-600">Vendor</p>
                    <p class="font-medium">{{ run.vendor }}</p>
                </div>
            </div>
        </div>
        <!-- AWBs Section -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4">AWB Details</h2>
            {% if run_awbs %}
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">AWB Number</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Origin</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Destination</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Box Details</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bag Number</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created At</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            {% for run_awb in run_awbs %}
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">{{ run_awb.awb.awbno }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap">{{ run_awb.awb.origin }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap">{{ run_awb.awb.destination }}</td>
                                    <td class="px-6 py-4">
                                        <div>
                                            <p class="font-medium">Box #{{ run_awb.box.id }}</p>
                                            <p class="text-sm text-gray-500">
                                                Dimensions: {{ run_awb.box.length }}x{{ run_awb.box.breadth }}x{{ run_awb.box.height }} cm
                                            </p>
                                            <p class="text-sm text-gray-500">Weight: {{ run_awb.box.actual_weight }} kg</p>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">{{ run_awb.bag_no }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap">{{ run_awb.created_at|date:"Y-m-d H:i" }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="text-gray-500">No AWBs added to this run yet.</p>
            {% endif %}
        </div>
        <!-- Back Button -->
        <div class="mt-6">
            <a href="{% url 'hub:pages:run:list' %}"
               class="inline-block bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Back to Runs</a>
        </div>
    </div>
{% endblock content %}
